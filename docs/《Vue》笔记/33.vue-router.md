---
title: vue-router
date: 2022-07-08 16:09:11
permalink: /pages/478313/
categories:
  - Vue
tags:
  - 
author: 
  name: yami
  link: https://github.com/yamin-hub
---
## ç›¸å…³ç†è§£

### vue-routerçš„ç†è§£

> `vue`çš„ä¸€ä¸ªæ’ä»¶åº“ï¼Œä¸“é—¨ç”¨æ¥å®ç°`SPA`åº”ç”¨

### SPAåº”ç”¨çš„ç†è§£

- å•é¡µ`Web`åº”ç”¨ï¼ˆsingle page web application `SPA`ï¼‰
- æ•´ä¸ªåº”ç”¨**åªæœ‰ä¸€ä¸ªå®Œæ•´çš„é¡µé¢**
- ç‚¹å‡»é¡µé¢ä¸­çš„å¯¼èˆªé“¾æ¥ä¸ä¼šåˆ·æ–°é¡µé¢ï¼Œåªä¼šåšé¡µé¢çš„å±€éƒ¨æ›´æ–°
- æ•°æ®éœ€è¦é€šè¿‡`ajax`**è¯·æ±‚è·å–

### è·¯ç”±çš„ç†è§£

**1. ä»€ä¹ˆæ˜¯è·¯ç”±ï¼Ÿ**

â€‹	a. ä¸€ä¸ªè·¯ç”±å°±æ˜¯ä¸€ç»„æ˜ å°„å…³ç³»

â€‹	b. `key`ä¸º**è·¯å¾„**ï¼Œ`value`å¯èƒ½æ˜¯**`function`**æˆ–**`componen`**

**2. è·¯ç”±åˆ†ç±»**

â€‹		a. åç«¯è·¯ç”±

â€‹			i. ç†è§£:valueæ˜¯functionï¼Œç”¨äºå¤„ç†å®¢æˆ·ç«¯æäº¤çš„è¯·æ±‚

â€‹			ii. å·¥ä½œè¿‡ç¨‹ï¼šæœåŠ¡å™¨æ¥æ”¶åˆ°ä¸€ä¸ªè¯·æ±‚æ—¶ï¼Œæ ¹æ®è¯·æ±‚è·¯å¾„æ‰¾åˆ°åŒ¹é…çš„å‡½æ•°æ¥å¤„ç†è¯·æ±‚ï¼Œè¿”å›å“åº”æ•°æ®

â€‹		b. å‰ç«¯è·¯ç”±

â€‹			i. ç†è§£:valueæ—¶componentï¼Œç”¨äºå±•ç¤ºé¡µçš„å†…å®¹

â€‹			ii. å·¥ä½œè¿‡ç¨‹ï¼šå½“æµè§ˆå™¨çš„è·¯å¾„æ”¹å˜æ—¶ï¼Œå¯¹åº”çš„ç»„ä»¶å°±ä¼šæ˜¾ç¤º

## åŸºæœ¬è·¯ç”±

1.å®‰è£…**`vue-router`**,å‘½ä»¤`npm i vue-router`

2.åº”ç”¨æ’ä»¶`Vue.use(VueRouter)`

3.ç¼–å†™`router`é…ç½®é¡¹

```js

import VueRouter from 'vue-router'			// å¼•å…¥VueRouter
import About from '../components/About'	// è·¯ç”±ç»„ä»¶
import Home from '../components/Home'		// è·¯ç”±ç»„ä»¶

// åˆ›å»ºrouterå®ä¾‹å¯¹è±¡ï¼Œå»ç®¡ç†ä¸€ç»„ä¸€ç»„çš„è·¯ç”±è§„åˆ™
const router = new VueRouter({
	routes:[
		{
			path:'/about',
			component:About
		},
		{
			path:'/home',
			component:Home
		}
	]
})

//æš´éœ²router
export default router
```

4.å®ç°åˆ‡æ¢

`<router-link><router-link>`æµè§ˆå™¨ä¼šè¢«æ›¿æ¢ä¸º`a`æ ‡ç­¾

`active-class`å¯é…ç½®é«˜äº®æ ·å¼

```vue
<router-link active-class="active" to="/about">About</router-link>
```

5.æŒ‡å®šå±•ç¤ºä½ `<router-view></router-view>`

`src/router/index.js`

```js
import VueRouter from 'vue-router'
// å¼•å…¥ç»„ä»¶
import About from '../components/About'
import Home from '../components/Home'

// åˆ›å»ºå¹¶æš´éœ²ä¸€ä¸ªè·¯ç”±å™¨
export default new VueRouter({
	routes:[
		{
			path:'/about',
			component:About
		},
		{
			path:'/home',
			component:Home
		}
	]
})
```

`src/main.js`

```js
import Vue from 'vue'
import App from './App.vue'
import VueRouter from 'vue-router'	// å¼•å…¥VueRouter
import router from './router'				// å¼•å…¥è·¯ç”±å™¨

Vue.config.productionTip = false

Vue.use(VueRouter)	// åº”ç”¨æ’ä»¶

new Vue({
	el:'#app',
	render: h => h(App),
	router:router
})
```

`src/App.vue`

```vue
<template>
  <div>
    <div class="row">
      <div class="col-xs-offset-2 col-xs-8">
        <div class="page-header"><h2>Vue Router Demo</h2></div>
      </div>
    </div>
    <div class="row">
      <div class="col-xs-2 col-xs-offset-2">
        <div class="list-group">
					<!-- åŸå§‹htmlä¸­æˆ‘ä»¬ä½¿ç”¨aæ ‡ç­¾å®ç°é¡µé¢çš„è·³è½¬ -->
          <!-- <a class="list-group-item active" href="./about.html">About</a> -->
          <!-- <a class="list-group-item" href="./home.html">Home</a> -->

					<!-- Vueä¸­å€ŸåŠ©router-linkæ ‡ç­¾å®ç°è·¯ç”±çš„åˆ‡æ¢ -->
					<router-link class="list-group-item" 
                       active-class="active" to="/about">About</router-link>
          <router-link class="list-group-item" 
                       active-class="active" to="/home">Home</router-link>
        </div>
      </div>
      <div class="col-xs-6">
        <div class="panel">
          <div class="panel-body">
						<!-- æŒ‡å®šç»„ä»¶çš„å‘ˆç°ä½ç½® -->
            <router-view></router-view>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>

<script>
	export default {
		name:'App'
	}
</script>
```

`src/components/Home.vue`

```vue
<template>
	<h2>æˆ‘æ˜¯Homeçš„å†…å®¹</h2>
</template>

<script>
	export default {
		name:'Home'
	}
</script>
```

`src/components/About.vue`

```vue
<template>
	<h2>æˆ‘æ˜¯Aboutçš„å†…å®¹</h2>
</template>

<script>
	export default {
		name:'About'
	}
</script>
```

## å‡ ä¸ªæ³¨æ„äº‹é¡¹

1. è·¯ç”±ç»„ä»¶é€šå¸¸å­˜æ”¾åœ¨pagesæ–‡ä»¶å¤¹ï¼Œä¸€èˆ¬ç»„ä»¶é€šå¸¸å­˜æ”¾åœ¨componentsæ–‡ä»¶å¤¹ï¼Œæ¯”å¦‚ä¸ŠèŠ‚æ¡ˆä¾‹å°±å¯ä»¥ä¿®æ”¹ä¸º

   `src/pages/Home.vue`

   `src/pages/About.vue`

   `src/router/index.js`

   `src/components/Banner.vue`

   `src/App.vue`

2. é€šè¿‡åˆ‡æ¢ï¼Œâ€œéšè—â€äº†çš„è·¯ç”±ç»„ä»¶ï¼Œ**é»˜è®¤æ—¶è¢«é”€æ¯æ‰çš„ï¼Œéœ€è¦çš„æ—¶å€™å†å»æŒ‚è½½**
3. æ¯ä¸ªç»„ä»¶éƒ½æœ‰è‡ªå·±çš„`$route`å±æ€§ï¼Œé‡Œé¢å­˜å‚¨ç€è‡ªå·±çš„è·¯ç”±ä¿¡æ¯
4. æ•´ä¸ªåº”ç”¨åªæœ‰ä¸€ä¸ª`router`ï¼Œå¯ä»¥é€šè¿‡ç»„ä»¶çš„`$router`å±æ€§è·å–åˆ°

```JS
// è¯¥æ–‡ä»¶ä¸“é—¨ç”¨äºåˆ›å»ºæ•´ä¸ªåº”ç”¨çš„è·¯ç”±å™¨
import VueRouter from "vue-router";
import Home from '../pages/Home'
import About from '../pages/About'

export default new VueRouter({
    routes:[
        {
            path:'/about',
            component:About
        },
        {
            path:'/home',
            component:Home
        }
    ]
})
```

```vue
<template>
    <div class="col-xs-offset-2 col-xs-8">
        <div class="page-header"><h2>Vue Router Demo</h2></div>
    </div>
</template>

<script>
    export default {
        name:'Banner'
    }
</script>
```

```vue
<template>
  <div>
    <div class="row">
      <Banner/>
    </div>
    <div class="row">
      <div class="col-xs-2 col-xs-offset-2">
        <div class="list-group">
          <!-- åŸå§‹htmlä¸­æˆ‘ä»¬ä½¿ç”¨aæ ‡ç­¾å®ç°é¡µé¢è·³è½¬ -->
          <!-- <a class="list-group-item active" href="./about.html">About</a>
           <a class="list-group-item" href="./home.html">Home</a> -->
          <!-- Vueä¸­å€ŸåŠ©router-linkæ ‡ç­¾å®ç°è·¯ç”±çš„åˆ‡æ¢ -->
          <router-link class="list-group-item" active-class="active" to="/about">
            About</router-link>
          <router-link class="list-group-item" active-class="active" to="/home">
            Home</router-link>
				</div>
			</div>
			<div class="col-xs-6">
				<div class="panel">
					<div class="panel-body">
						<!-- æŒ‡å®šç»„ä»¶çš„å‘ˆç°ä½ç½® -->
						<router-view></router-view>
					</div>
				</div>
			</div>
		</div>
	</div>
</template>

<script>
	import Banner from './components/Banner.vue'
	export default {
		name:'App',
		components:{ Banner }
	}
</script>
```

## å¤šçº§è·¯ç”±

1. é…ç½®è·¯ç”±è§„åˆ™ï¼Œä½¿ç”¨`children`é…ç½®é¡¹

```js
routes:[
	{
		path:'/about',
		component:About,
	},
	{
		path:'/home',
		component:Home,
		children:[ 					// é€šè¿‡childrené…ç½®å­çº§è·¯ç”±
			{
				path:'news', 		// æ­¤å¤„ä¸€å®šä¸è¦å¸¦æ–œæ ï¼Œå†™æˆ /news
				component:News
			},
			{
				path:'message',	// æ­¤å¤„ä¸€å®šä¸è¦å†™æˆ /message
				component:Message
			}
		]
	}
]
```

2.è·³è½¬(è¦å†™å®Œæ•´è·¯å¾„)

```vue
<router-link to="/home/news">News</router-link>
```

`src/pages/Home.vue`

```vue
<template>
	<div>
		<h2>Homeç»„ä»¶å†…å®¹</h2>
		<div>
			<ul class="nav nav-tabs">
				<li><router-link class="list-group-item" 
                       active-class="active" to="/home/news">News</router-link></li>
				<li><router-link class="list-group-item" 
                       active-class="active" to="/home/message">Message</router-link></li>
			</ul>
			<router-view></router-view>
		</div>
	</div>
</template>

<script>
	export default {
		name:'Home',
	}
</script>
```

`src/pages/News.vue`

```vue
<template>
    <ul>
        <li>news001</li>
        <li>news002</li>
        <li>news003</li>
    </ul>
</template>

<script>
    export default {
        name:'News'
    }
</script>
```

`src/pages/Message.vue`

```vue
<template>
    <ul>
        <li>
            <a href="/message1">message001</a>&nbsp;&nbsp;
        </li>
        <li>
            <a href="/message2">message002</a>&nbsp;&nbsp;
        </li>
        <li>
            <a href="/message/3">message003</a>&nbsp;&nbsp;
        </li>
    </ul>
</template>

<script>
    export default {
        name:'News'
    }
</script>
```

`src/router/index.js`

```js
//è¯¥æ–‡ä»¶ä¸“é—¨ç”¨äºåˆ›å»ºæ•´ä¸ªåº”ç”¨çš„è·¯ç”±å™¨
import VueRouter from "vue-router";
//å¼•å…¥ç»„ä»¶
import Home from '../pages/Home'
import About from '../pages/About'
import News from '../pages/News'
import Message from '../pages/Message'

//åˆ›å»ºå¹¶æš´éœ²ä¸€ä¸ªè·¯ç”±å™¨
export default new VueRouter({
    routes:[
        {
            path:'/about',
            component:About
        },
        {
            path:'/home',
            component:Home,
            children:[
                {
                    path:'news',
                    component:News
                },
                {
                    path:'message',
                    component:Message
                }
            ]
        }
    ]
})
```

## è·¯ç”±çš„queryå‚æ•°

1.ä¼ é€’å‚æ•°

```vue
<!-- è·³è½¬å¹¶æºå¸¦queryå‚æ•°ï¼Œtoçš„å­—ç¬¦ä¸²å†™æ³• -->
<router-link :to="`/home/message/detail?id=${m.id}&title=${m.title}`">è·³è½¬</router-link>
				
<!-- è·³è½¬å¹¶æºå¸¦queryå‚æ•°ï¼Œtoçš„å¯¹è±¡å†™æ³•ï¼ˆæ¨èï¼‰ -->
<router-link 
	:to="{
		path:'/home/message/detail',
		query:{
		   id: m.id,
       title: m.title
		}
	}"
>è·³è½¬</router-link>
```

2.æ¥æ”¶å‚æ•°

```js
$route.query.id
$route.query.title
```

`src/router/index.js`

```js
import VueRouter from "vue-router";
import Home from '../pages/Home'
import About from '../pages/About'
import News from '../pages/News'
import Message from '../pages/Message'
import Detail from '../pages/Detail'

// åˆ›å»ºå¹¶æš´éœ²ä¸€ä¸ªè·¯ç”±å™¨
export default new VueRouter({
  routes:[
    {
      path:'/about',
      component:About
    },
    {
      path:'/home',
      component:Home,
      children:[
        {
          path:'news',
          component:News
        },
        {
          path:'message',
          component:Message,
          children:[
            {
              path:'detail',
              component:Detail
            }
          ]
        }
      ]
    }
  ]
})
```

`src/pages/Message.vue`

```vue
<template>
  <div>
    <ul>
      <li v-for="m in messageList" :key="m.id">
        <!-- è·³è½¬è·¯ç”±å¹¶æºå¸¦queryå‚æ•°ï¼Œtoçš„å­—ç¬¦ä¸²å†™æ³• -->
        <!-- <router-link :to="`/home/message/detail?id=${m.id}&title=${m.title}`">
                      {{m.title}}
    				 </router-link>&nbsp;&nbsp; -->

        <!-- è·³è½¬è·¯ç”±å¹¶æºå¸¦queryå‚æ•°ï¼Œtoçš„å¯¹è±¡å†™æ³• -->
        <router-link :to="{
                            path:'/home/message/detail',
                            query:{
                              id:m.id,
                              title:m.title
                            }
                          }">
          {{m.title}}
      </router-link>&nbsp;&nbsp;
      </li>
    </ul>
    <hr/>
    <router-view></router-view>
  </div>
</template>

<script>
  export default {
    name:'News',
    data(){
      return{
        messageList:[
          {id:'001',title:'æ¶ˆæ¯001'},
          {id:'002',title:'æ¶ˆæ¯002'},
          {id:'003',title:'æ¶ˆæ¯003'}
        ]
      }
    }
  }
</script>
```

`src/pages/Detail.vue`

```vue
<template>
    <ul>
        <li>æ¶ˆæ¯ç¼–å·ï¼š{{ $route.query.id }}</li>
        <li>æ¶ˆæ¯æ ‡é¢˜ï¼š{{ $route.query.title }}</li>
    </ul>
</template>

<script>
    export default {
        name:'Detail'
    }
</script>
```

## å‘½åè·¯ç”±

- ä½œç”¨ï¼šå¯ä»¥ç®€åŒ–è·¯ç”±çš„è·³è½¬
- å¦‚ä½•ä½¿ç”¨

â€‹		a.ç»™è·¯ç”±å‘½å

```js
{
	path:'/demo',
	component:Demo,
	children:[
		{
			path:'test',
			component:Test,
			children:[
				{
          name:'hello' // ç»™è·¯ç”±å‘½å
					path:'welcome',
					component:Hello,
				}
			]
		}
	]
}
```

â€‹	b.ç®€åŒ–è·³è½¬

```vue
<!--ç®€åŒ–å‰ï¼Œéœ€è¦å†™å®Œæ•´çš„è·¯å¾„ -->
<router-link to="/demo/test/welcome">è·³è½¬</router-link>

<!--ç®€åŒ–åï¼Œç›´æ¥é€šè¿‡åå­—è·³è½¬ -->
<router-link :to="{name:'hello'}">è·³è½¬</router-link>

<!--ç®€åŒ–å†™æ³•é…åˆä¼ é€’å‚æ•° -->
<router-link 
	:to="{
		name:'hello',
		query:{
		    id:666,
        title:'ä½ å¥½'
		}
	}"
>è·³è½¬</router-link>
```

`src/router/index.js`

```js
import VueRouter from "vue-router";
import Home from '../pages/Home'
import About from '../pages/About'
import News from '../pages/News'
import Message from '../pages/Message'
import Detail from '../pages/Detail'

export default new VueRouter({
    routes:[
        {
            path:'/about',
            component:About
        },
        {
            path:'/home',
            component:Home,
            children:[
                {
                    path:'news',
                    component:News
                },
                {
                    path:'message',
                    component:Message,
                    children:[
                        {
                            name:'detail',	// nameé…ç½®é¡¹ä¸ºè·¯ç”±å‘½å
                            path:'detail',
                            component:Detail
                        }
                    ]
                }
            ]
        }
    ]
})
```

`src/pages/Message.vue`

```vue
<template>
    <div>
        <ul>
            <li v-for="m in messageList" :key="m.id">
                <!-- è·³è½¬è·¯ç”±å¹¶æºå¸¦queryå‚æ•°ï¼Œtoçš„å­—ç¬¦ä¸²å†™æ³• -->
                <!-- <router-link :to="`/home/message/detail?id=${m.id}&title=${m.title}`">
                    {{m.title}}
                </router-link>&nbsp;&nbsp; -->

                <!-- è·³è½¬è·¯ç”±å¹¶æºå¸¦queryå‚æ•°ï¼Œtoçš„å¯¹è±¡å†™æ³• -->
                <router-link :to="{
                    name:'detail',	//ä½¿ç”¨nameè¿›è¡Œè·³è½¬
                    query:{
                        id:m.id,
                        title:m.title
                    }
                }">
                    {{m.title}}
                </router-link>&nbsp;&nbsp;
            </li>
        </ul>
        <hr/>
        <router-view></router-view>
    </div>
</template>

<script>
    export default {
        name:'News',
        data(){
            return{
                messageList:[
                    {id:'001',title:'æ¶ˆæ¯001'},
                    {id:'002',title:'æ¶ˆæ¯002'},
                    {id:'003',title:'æ¶ˆæ¯003'}
                ]
            }
        }
    }
</script>
```

## è·¯ç”±çš„paramså‚æ•°

1.é…ç½®è·¯ç”±ï¼Œå£°æ˜æ¥æ”¶`params`å‚æ•°

```js
{
	path:'/home',
	component:Home,
	children:[
		{
			path:'news',
			component:News
		},
		{
			component:Message,
			children:[
				{
					name:'xiangqing',
					path:'detail/:id/:title', // ğŸ”´ä½¿ç”¨å ä½ç¬¦å£°æ˜æ¥æ”¶paramså‚æ•°
					component:Detail
				}
			]
		}
	]
}
```

2.ä¼ é€’å‚æ•°

â€‹	ç‰¹åˆ«æ³¨æ„ï¼šè·¯ç”±æºå¸¦`params`å‚æ•°æ—¶ï¼Œè‹¥ä½¿ç”¨`to`çš„å¯¹è±¡å†™æ³•ï¼Œåˆ™ä¸èƒ½ä½¿ç”¨`path`é…ç½®é¡¹ï¼Œå¿…é¡»ä½¿ç”¨`name`é…ç½®ï¼

```vue
<!-- è·³è½¬å¹¶æºå¸¦paramså‚æ•°ï¼Œtoçš„å­—ç¬¦ä¸²å†™æ³• -->
<router-link :to="/home/message/detail/666/ä½ å¥½">è·³è½¬</router-link>
				
<!-- è·³è½¬å¹¶æºå¸¦paramså‚æ•°ï¼Œtoçš„å¯¹è±¡å†™æ³• -->
<router-link 
	:to="{
		name:'xiangqing',
		params:{
		   id:666,
       title:'ä½ å¥½'
		}
	}"
>è·³è½¬</router-link>
```

3.æ¥æ”¶å‚æ•°

```js
$route.params.id
$route.params.title
```

`src/router/index.js`

```js
import VueRouter from "vue-router";
import Home from '../pages/Home'
import About from '../pages/About'
import News from '../pages/News'
import Message from '../pages/Message'
import Detail from '../pages/Detail'

export default new VueRouter({
    routes:[
        {
            path:'/about',
            component:About
        },
        {
            path:'/home',
            component:Home,
            children:[
                {
                    path:'news',
                    component:News
                },
                {
                    path:'message',
                    component:Message,
                    children:[
                        {
                            name:'xiangqing',
                            path:'detail/:id/:title',	// ä½¿ç”¨å ä½ç¬¦å£°æ˜æ¥æ”¶paramså‚æ•°
                            component:Detail
                        }
                    ]
                }
            ]
        }
    ]
})
```

`src/pages/Message.vue`

```vue
<template>
    <div>
        <ul>
            <li v-for="m in messageList" :key="m.id">
              
                <!-- è·³è½¬è·¯ç”±å¹¶æºå¸¦paramså‚æ•°ï¼Œtoçš„å­—ç¬¦ä¸²å†™æ³• -->
                <!-- <router-link :to="`/home/message/detail/${m.id}/${m.title}`">
                    {{m.title}}
                </router-link>&nbsp;&nbsp; -->

                <!-- è·³è½¬è·¯ç”±å¹¶æºå¸¦paramså‚æ•°ï¼Œtoçš„å¯¹è±¡å†™æ³• -->
                <router-link :to="{
                    name:'xiangqing',
                    params:{
                        id:m.id,
                        title:m.title
                    }
                }">
                    {{m.title}}
                </router-link>&nbsp;&nbsp;
            </li>
        </ul>
        <hr/>
        <router-view></router-view>
    </div>
</template>

<script>
    export default {
        name:'News',
        data(){
            return{
                messageList:[
                  {id:'001',title:'æ¶ˆæ¯001'},
                  {id:'002',title:'æ¶ˆæ¯002'},
                  {id:'003',title:'æ¶ˆæ¯003'}
                ]
            }
        }
    }
</script>
```

`src/pages/Detail.vue`

```vue
<template>
  <ul>
    <li>æ¶ˆæ¯ç¼–å·ï¼š{{ $route.params.id }}</li>
    <li>æ¶ˆæ¯æ ‡é¢˜ï¼š{{ $route.params.title }}</li>
  </ul>
</template>

<script>
    export default {
        name:'Detail'
    }
</script>
```

## è·¯ç”±çš„propsé…ç½®

`props`ä½œç”¨ï¼šè®©è·¯ç”±ç»„ä»¶æ›´æ–¹ä¾¿çš„æ”¶åˆ°å‚æ•°

```js
{
	name:'xiangqing',
	path:'detail/:id',
	component:Detail,

	//ç¬¬ä¸€ç§å†™æ³•ï¼špropså€¼ä¸ºå¯¹è±¡ï¼Œè¯¥å¯¹è±¡ä¸­æ‰€æœ‰çš„key-valueçš„ç»„åˆæœ€ç»ˆéƒ½ä¼šé€šè¿‡propsä¼ ç»™Detailç»„ä»¶
	// props:{a:900}

	//ç¬¬äºŒç§å†™æ³•ï¼špropså€¼ä¸ºå¸ƒå°”å€¼ï¼Œä¸ºtrueæ—¶ï¼Œåˆ™æŠŠè·¯ç”±æ”¶åˆ°çš„æ‰€æœ‰paramså‚æ•°é€šè¿‡propsä¼ ç»™Detailç»„ä»¶
	// props:true
	
	//ç¬¬ä¸‰ç§å†™æ³•ï¼špropså€¼ä¸ºå‡½æ•°ï¼Œè¯¥å‡½æ•°è¿”å›çš„å¯¹è±¡ä¸­æ¯ä¸€ç»„key-valueéƒ½ä¼šé€šè¿‡propsä¼ ç»™Detailç»„ä»¶
	props($route){
		return {
			id: $route.query.id,
			title: $route.query.title
		}
	}
}
```

`src/router/index.js`

```js
import VueRouter from "vue-router";
import Home from '../pages/Home'
import About from '../pages/About'
import News from '../pages/News'
import Message from '../pages/Message'
import Detail from '../pages/Detail'

export default new VueRouter({
  routes:[
    {
      path: '/about',
      component: About
    },
    {
      path:'/home',
      component:Home,
      children:[
        {
          path:'news',
          component:News
        },
        {
          path:'message',
          component:Message,
          children:[
            {
              name:'xiangqing',
              path:'detail/:id/:title',
              component:Detail,
              // propsçš„ç¬¬ä¸€ç§å†™æ³•ï¼Œå€¼ä¸ºå¯¹è±¡ï¼Œ
              // è¯¥å¯¹è±¡ä¸­çš„æ‰€æœ‰key-valueéƒ½ä¼šä»¥propsçš„å½¢å¼ä¼ ç»™Detailç»„ä»¶
              // props:{a:1,b:'hello'}

              // propsçš„ç¬¬äºŒç§å†™æ³•ï¼Œå€¼ä¸ºå¸ƒå°”å€¼ï¼Œ
              // è‹¥å¸ƒå°”å€¼ä¸ºçœŸï¼Œä¼šæŠŠè¯¥è·¯ç”±ç»„ä»¶æ”¶åˆ°çš„æ‰€æœ‰paramså‚æ•°ï¼Œä»¥propsçš„å½¢å¼ä¼ ç»™Detailç»„ä»¶
              // props:true

              // propsçš„ç¬¬ä¸‰ç§å†™æ³•ï¼Œå€¼ä¸ºå‡½æ•°
              props(params) { // è¿™é‡Œå¯ä»¥ä½¿ç”¨è§£æ„èµ‹å€¼
                return {
                  id: params.id,
                  title: params.title,
                }
              }
            }
          ]
        }
      ]
    }
  ]
})
```

`src/pages/Message.vue`

```VUE
<template>
	<div>
    <ul>
      <li v-for="m in messageList" :key="m.id">
        <router-link :to="{
                name:'xiangqing',
                params:{
                    id:m.id,
                    title:m.title
                }
         }">
          	{{m.title}}
  			</router-link>&nbsp;&nbsp;
  		</li>
  	</ul>
    <hr/>
    <router-view></router-view>
  </div>
</template>

<script>
    export default {
        name:'News',
        data(){
            return{
                messageList:[
                    {id:'001',title:'æ¶ˆæ¯001'},
                    {id:'002',title:'æ¶ˆæ¯002'},
                    {id:'003',title:'æ¶ˆæ¯003'}
                ]
            }
        }
    }
</script>
```

`src/pages/Detail.vue`

```vue
<template>
    <ul>
        <li>æ¶ˆæ¯ç¼–å·ï¼š{{ id }}</li>
        <li>æ¶ˆæ¯æ ‡é¢˜ï¼š{{ title }}</li>
    </ul>
</template>

<script>
    export default {
        name:'Detail',
        props:['id','title']
    }
</script>
```

## è·³è½¬ä¹‹replaceæ–¹æ³•

1. ä½œç”¨ï¼šæ§åˆ¶è·¯ç”±è·³è½¬æ—¶æ“ä½œæµè§ˆå™¨å†å²è®°å½•çš„æ¨¡å¼

2. æµè§ˆå™¨çš„å†å²è®°å½•æœ‰ä¸¤ç§å†™å…¥æ–¹å¼:**push**å’Œ**`replace`**

â€‹		**`push`**æ˜¯è¿½åŠ å†å²è®°å½•

â€‹		**`replace`**æ˜¯æ›¿æ¢å½“å‰è®°å½•ï¼Œè·¯ç”±è·³è½¬æ—¶å€™é»˜è®¤ä¸º**`push`**æ–¹æ³•

3.å¼€å¯**`replace`**æ¨¡å¼

â€‹		**`<router-link :replace="true" ...>News</router-link>`**

â€‹		ç®€å†™ **`<router-link replace ...>News</router-link>`**

`src/pages/Home.vue`

```vue
<template>
  <div>
    <h2>Homeç»„ä»¶å†…å®¹</h2>
    <div>
      <ul class="nav nav-tabs">
        <li>
          <router-link replace class="list-group-item" active-class="active" 
                       to="/home/news">News</router-link>
    		</li>
        <li>
          <router-link replace class="list-group-item" active-class="active" 
                       to="/home/message">Message</router-link>
    		</li>
    </ul>
    <router-view></router-view>
    </div>
  </div>
</template>

<script>
  export default {
    name:'Home'
  }
</script>
```

## ç¼–ç¨‹å¼è·¯ç”±å¯¼èˆª(ä¸ç”¨`<router-link>`)

ä½œç”¨ï¼šä¸å€ŸåŠ©`<router-link>`å®ç°è·¯ç”±è·³è½¬ï¼Œè®©è·¯ç”±è·³è½¬æ›´åŠ çµæ´»

this.$router.`pushï¼ˆ{}ï¼‰` å†…ä¼ çš„å¯¹è±¡ä¸`<router-link>`ä¸­çš„`to`ç›¸åŒ

this.$router.`replace({})`  ä¸pushç±»ä¼¼

this.$router.`forward()` å‰è¿›

this.$router.`back()`       å›é€€

this.$router.`go(n)`         å¯å‰è¿›ä¹Ÿå¯åé€€ï¼Œnä¸ºæ­£æ•°å‰è¿›nï¼Œä¸ºè´Ÿæ•°ä¸ºé€€

```js
this.$router.push({
	name:'xiangqing',
  params:{
    id:xxx,
    title:xxx
  }
})

this.$router.replace({
	name:'xiangqing',
  params:{
    id:xxx,
    title:xxx
  }
})
```

`src/components/Banner.vue`

```vue
<template>
	<div class="col-xs-offset-2 col-xs-8">
		<div class="page-header">
			<h2>Vue Router Demo</h2>
			<button @click="back">åé€€</button>
			<button @click="forward">å‰è¿›</button>
			<button @click="test">æµ‹è¯•ä¸€ä¸‹go</button>
		</div>
	</div>
</template>

<script>
	export default {
		name:'Banner',
		methods:{
			back(){
				this.$router.back()
			},
			forward(){
				this.$router.forward()
			},
			test(){
				this.$router.go(3)
			}
		},
	}
</script>
```

## ç¼“å­˜è·¯ç”±ç»„ä»¶

ä½œç”¨ï¼šè®©ä¸å±•ç¤ºçš„è·¯ç”±ç»„ä»¶ä¿æŒæŒ‚è½½ï¼Œä¸è¢«é”€æ¯

```vue
// ç¼“å­˜ä¸€ä¸ªè·¯ç”±ç»„ä»¶
<keep-alive include="News"> // includeä¸­å†™æƒ³è¦ç¼“å­˜çš„ç»„ä»¶åï¼Œä¸å†™è¡¨ç¤ºå…¨éƒ¨ç¼“å­˜
    <router-view></router-view>
</keep-alive>

// ç¼“å­˜å¤šä¸ªè·¯ç”±ç»„ä»¶
<keep-alive :include="['News','Message']"> 
    <router-view></router-view>
</keep-alive>
```

`src/pages/News.vue`

```vue
<template>
    <ul>
        <li>news001 <input type="text"></li>
        <li>news002 <input type="text"></li>
        <li>news003 <input type="text"></li>
    </ul>
</template>

<script>
    export default {
        name:'News'
    }
</script>
```

`src/pages/Home.vue`

```vue
<template>
  <div>
    <h2>Homeç»„ä»¶å†…å®¹</h2>
    <div>
      <ul class="nav nav-tabs">
        <li><router-link replace class="list-group-item" active-class="active" 
                       to="/home/news">News</router-link></li>
        <li><router-link replace class="list-group-item" active-class="active" 
                       to="/home/message">Message</router-link></li>
    	</ul>
      <keep-alive include="News">
        <router-view></router-view>
    	</keep-alive>
    </div>
  </div>
</template>

<script>
    export default {
        name:'Home'
    }
</script>
```

## ä¸¤ä¸ªç”Ÿå‘½å‘¨æœŸé’©å­

**activated**å’Œ**deactivated**æ˜¯è·¯ç”±ç»„ä»¶æ‰€ç‹¬æœ‰çš„ä¸¤ä¸ªé’©å­ï¼Œç”¨äºæ•è·è·¯ç”±ç»„ä»¶çš„æ¿€æ´»çŠ¶æ€

å…·ä½“ä½¿ç”¨

	1. `activated`è·¯ç”±ç»„ä»¶è¢«æ¿€æ´»æ—¶è§¦å‘
	1. `deactived`è·¯ç”±ç»„ä»¶å¤±æ´»æ—¶è§¦å‘

`src/pages/News.vue`

```vue
<template>
    <ul>
        <li :style="{opacity}">æ¬¢è¿å­¦ä¹ vue</li>
        <li>news001 <input type="text"></li>
        <li>news002 <input type="text"></li>
        <li>news003 <input type="text"></li>
    </ul>
</template>

<script>
    export default {
        name:'News',
        data(){
            return{
                opacity:1
            }
        },
        activated(){
            console.log('Newsç»„ä»¶è¢«æ¿€æ´»äº†')
            this.timer = setInterval(() => {
                this.opacity -= 0.01
                if(this.opacity <= 0) this.opacity = 1
            },16)
        },
        deactivated(){
            console.log('Newsç»„ä»¶å¤±æ´»äº†')
            clearInterval(this.timer)
        }
    }
</script>
```

## è·¯ç”±å®ˆå«

ä½œç”¨ï¼šå¯¹è·¯ç”±è¿›è¡Œæƒé™æ§åˆ¶

åˆ†ç±»ï¼šå…¨å±€å®ˆå«ã€ç‹¬äº«å®ˆå«ã€ç»„ä»¶å†…å®ˆå«

**1.å…¨å±€å®ˆå«**

â€‹	`meta`è·¯ç”±æºä¿¡æ¯

```js
// å…¨å±€å‰ç½®å®ˆå«ï¼šåˆå§‹åŒ–æ—¶ã€æ¯æ¬¡è·¯ç”±åˆ‡æ¢å‰æ‰§è¡Œ
router.beforeEach((to,from,next) => {
	console.log('beforeEach',to,from)
	if(to.meta.isAuth){ // åˆ¤æ–­å½“å‰è·¯ç”±æ˜¯å¦éœ€è¦è¿›è¡Œæƒé™æ§åˆ¶
		if(localStorage.getItem('school') === 'atguigu'){ // æƒé™æ§åˆ¶çš„å…·ä½“è§„åˆ™
			next()	// æ”¾è¡Œ
		}else{
			alert('æš‚æ— æƒé™æŸ¥çœ‹')
		}
	}else{
		next()	// æ”¾è¡Œ
	}
})

// å…¨å±€åç½®å®ˆå«ï¼šåˆå§‹åŒ–æ—¶ã€æ¯æ¬¡è·¯ç”±åˆ‡æ¢åæ‰§è¡Œ
router.afterEach((to,from) => {
	console.log('afterEach',to,from)
	if(to.meta.title){ 
		document.title = to.meta.title //ä¿®æ”¹ç½‘é¡µçš„title
	}else{
		document.title = 'vue_test'
	}
})
```

**2. ç‹¬äº«å®ˆå«**

```js
beforeEnter(to,from,next){
	console.log('beforeEnter',to,from)
    if(localStorage.getItem('school') === 'atguigu'){
        next()
    }else{
        alert('æš‚æ— æƒé™æŸ¥çœ‹')
    }
}
```

**3.ç»„ä»¶å†…å®ˆå«**

```vue
//è¿›å…¥å®ˆå«ï¼šé€šè¿‡è·¯ç”±è§„åˆ™ï¼Œè¿›å…¥è¯¥ç»„ä»¶æ—¶è¢«è°ƒç”¨
beforeRouteEnter (to, from, next) {... next()},

//ç¦»å¼€å®ˆå«ï¼šé€šè¿‡è·¯ç”±è§„åˆ™ï¼Œç¦»å¼€è¯¥ç»„ä»¶æ—¶è¢«è°ƒç”¨
beforeRouteLeave (to, from, next) {... next()},
```

### **å®ä¾‹ä»£ç **

**å…¨å±€è·¯ç”±å®ˆå«**

`src/router/index.js`

```js
//è¯¥æ–‡ä»¶ä¸“é—¨ç”¨äºåˆ›å»ºæ•´ä¸ªåº”ç”¨çš„è·¯ç”±å™¨
import VueRouter from "vue-router";
//å¼•å…¥ç»„ä»¶
import Home from '../pages/Home'
import About from '../pages/About'
import News from '../pages/News'
import Message from '../pages/Message'
import Detail from '../pages/Detail'


//åˆ›å»ºä¸€ä¸ªè·¯ç”±å™¨
const router = new VueRouter({
    routes:[
        {
            name:'guanyv',
            path:'/about',
            component:About,
            meta:{title:'å…³äº'}
        },
        {
            name:'zhuye',
            path:'/home',
            component:Home,
            meta:{title:'ä¸»é¡µ'},
            children:[
                {
                    name:'xinwen',
                    path:'news',
                    component:News,
                    meta:{isAuth:true,title:'æ–°é—»'}
                },
                {
                    name:'xiaoxi',
                    path:'message',
                    component:Message,
                    meta:{isAuth:true,title:'æ¶ˆæ¯'},
                    children:[
                        {
                            name:'xiangqing',
                            path:'detail',
                            component:Detail,
                            meta:{isAuth:true,title:'è¯¦æƒ…'},
                            props($route){
                                return {
                                    id:$route.query.id,
                                    title:$route.query.title,
                                }
														}
                        }
                    ]
                }
            ]
        }
    ]
})

// ğŸ”´å…¨å±€å‰ç½®è·¯ç”±å®ˆå«â€”â€”â€”â€”åˆå§‹åŒ–çš„æ—¶å€™ã€æ¯æ¬¡è·¯ç”±åˆ‡æ¢ä¹‹å‰è¢«è°ƒç”¨
router.beforeEach((to,from,next) => {
    console.log('å‰ç½®è·¯ç”±å®ˆå«',to,from)
    if(to.meta.isAuth){
        if(localStorage.getItem('school')==='atguigu'){
            next()
        }else{
            alert('å­¦æ ¡åä¸å¯¹ï¼Œæ— æƒé™æŸ¥çœ‹ï¼')
        }
    }else{
        next()
    }
})

// ğŸ”´å…¨å±€åç½®è·¯ç”±å®ˆå«â€”â€”â€”â€”åˆå§‹åŒ–çš„æ—¶å€™è¢«è°ƒç”¨ã€æ¯æ¬¡è·¯ç”±åˆ‡æ¢ä¹‹åè¢«è°ƒç”¨
router.afterEach((to,from)=>{
	console.log('åç½®è·¯ç”±å®ˆå«',to,from)
	document.title = to.meta.title || 'ç¡…è°·ç³»ç»Ÿ'
})

// å¯¼å‡ºè·¯ç”±å™¨
export default router
```

**ç‹¬äº«è·¯ç”±å®ˆå«**

`src/router/index.js`

```js
//è¯¥æ–‡ä»¶ä¸“é—¨ç”¨äºåˆ›å»ºæ•´ä¸ªåº”ç”¨çš„è·¯ç”±å™¨
import VueRouter from "vue-router";
//å¼•å…¥ç»„ä»¶
import Home from '../pages/Home'
import About from '../pages/About'
import News from '../pages/News'
import Message from '../pages/Message'
import Detail from '../pages/Detail'


//åˆ›å»ºä¸€ä¸ªè·¯ç”±å™¨
const router = new VueRouter({
    routes:[
        {
            name:'guanyv',
            path:'/about',
            component:About,
            meta:{title:'å…³äº'}
        },
        {
            name:'zhuye',
            path:'/home',
            component:Home,
            meta:{title:'ä¸»é¡µ'},
            children:[
                {
                    name:'xinwen',
                    path:'news',
                    component:News,
                    meta:{title:'æ–°é—»'},
                    // ğŸ”´ç‹¬äº«å®ˆå«ï¼Œç‰¹å®šè·¯ç”±åˆ‡æ¢ä¹‹åè¢«è°ƒç”¨
                    beforeEnter(to,from,next){
                        console.log('ç‹¬äº«è·¯ç”±å®ˆå«',to,from)
                        if(localStorage.getItem('school') === 'atguigu'){
                            next()
                        }else{
                            alert('æš‚æ— æƒé™æŸ¥çœ‹')
                        }
                    }
                },
                {
                    name:'xiaoxi',
                    path:'message',
                    component:Message,
                    meta:{title:'æ¶ˆæ¯'},
                    children:[
                        {
                            name:'xiangqing',
                            path:'detail',
                            component:Detail,
                            meta:{title:'è¯¦æƒ…'},
                            props($route){
                                return {
                                    id:$route.query.id,
                                    title:$route.query.title,
                                }
                            }
                        }
                    ]
                }
            ]
        }
    ]
})

//å…¨å±€åç½®è·¯ç”±å®ˆå«â€”â€”â€”â€”åˆå§‹åŒ–çš„æ—¶å€™è¢«è°ƒç”¨ã€æ¯æ¬¡è·¯ç”±åˆ‡æ¢ä¹‹åè¢«è°ƒç”¨
router.afterEach((to,from)=>{
	console.log('åç½®è·¯ç”±å®ˆå«',to,from)
	document.title = to.meta.title || 'ç¡…è°·ç³»ç»Ÿ'
})

//å¯¼å‡ºè·¯ç”±å™¨
export default router
```

**ç»„ä»¶å†…è·¯ç”±å®ˆå«**

`src/pages/About.vue`

```vue
<template>
    <h2>æˆ‘æ˜¯Aboutç»„ä»¶çš„å†…å®¹</h2>
</template>

<script>
    export default {
        name:'About',
        // é€šè¿‡è·¯ç”±è§„åˆ™ï¼Œç¦»å¼€è¯¥ç»„ä»¶æ—¶è¢«è°ƒç”¨
        beforeRouteEnter (to, from, next) {
            console.log('About--beforeRouteEnter',to,from)
            if(localStorage.getItem('school')==='atguigu'){
                next()
            }else{
                alert('å­¦æ ¡åä¸å¯¹ï¼Œæ— æƒé™æŸ¥çœ‹ï¼')
            }
        },
        // é€šè¿‡è·¯ç”±è§„åˆ™ï¼Œç¦»å¼€è¯¥ç»„ä»¶æ—¶è¢«è°ƒç”¨
        beforeRouteLeave (to, from, next) {
            console.log('About--beforeRouteLeave',to,from)
            next()
        }
    }
</script>
```

## è·¯ç”±å™¨çš„ä¸¤ç§å·¥ä½œæ¨¡å¼

1. å¯¹äºä¸€ä¸ª`url`æ¥è¯´ï¼Œä»€ä¹ˆæ˜¯`hash`å€¼ **#åŠå…¶åé¢çš„å†…å®¹å°±æ˜¯hashå€¼**
2. hashå€¼ä¸ä¼šåŒ…å«åœ¨HTTPè¯·æ±‚ä¸­ï¼Œå³ï¼šhashå€¼ä¸ä¼šå¸¦ç»™æœåŠ¡å™¨
3. `hash`æ¨¡å¼

â€‹		a.åœ°å€ä¸­æ°¸è¿œå¸¦ç€#å·ï¼Œä¸ç¾è§‚

â€‹		b.è‹¥ä»¥åå°†åœ°å€é€šè¿‡ç¬¬ä¸‰æ–¹appåˆ†äº«ï¼Œè‹¥appæ ¡éªŒä¸¥æ ¼ï¼Œåˆ™åœ°å€ä¼šè¢«æ ‡è®°ä¸ºä¸åˆæ³•

â€‹		c. å…¼å®¹æ€§è¾ƒå¥½

4. **`history`**æ¨¡å¼
   a.åœ°å€å¹²å‡€ï¼Œç¾è§‚

   b.å…¼å®¹æ€§å’Œ`hash`æ¨¡å¼ç›¸æ¯”ç•¥å·®

   c.åº”ç”¨éƒ¨ç½²ä¸Šçº¿æ—¶éœ€è¦åç«¯äººå‘˜æ”¯æŒï¼Œè§£å†³åˆ·æ–°æ–°é¡µé¢æœåŠ¡ç«¯404çš„é—®é¢˜

```js
const router =  new VueRouter({
	mode:'history',
	routes:[...]
})

export default router
```













































































































































































































